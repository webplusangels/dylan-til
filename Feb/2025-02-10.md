## 2025-02-10

### JWT(Json Web Token)란?

JSON 객체를 사용하여 사용자 정보를 안전하게 전달하는 토큰 기반 인증 방식.

주로 웹 애플리케이션의 인증 및 권한 부여에 사용되며, 자체적으로 정보를 포함하고 있어 세션을 유지할 필요가 없다는 특징이 있음.

### JWT의 구조

Header, Payload, Signature로 구성되며 각 부분을 .(dot)으로 이어 Base64 URL 인코딩되어 전송됨.

**헤더 (Header)**

- 임호화 방식과 토큰의 타입을 포함

```json
{
  "alg": "HS256",
  "typ": "JWT"
}
```

**페이로드 (Payload)**

- 전달하기 위한 정보를 포함한 데이터
- 디코딩이 가능한 값이므로 정보 저장에 주의

```json
{
  "sub": "user123",
  "role": "admin",
  "exp": 1712331600
}
```

**서명 (Signature)**

- 헤더와 페이로드를 힙쳐 서버의 비밀키로 서명을 생성
- 페이로드의 조작 여부를 판단하기 위한 안전장치

### JWT의 동작 원리

**토큰 발급**

1. 사용자가 아이디와 비밀번호로 로그인 요청
2. DB에서 존재 확인
3. 확인 후 비밀키로 토큰 발급
4. 클라이언트에게 전달

**인증 과정**

1. 헤더에 데이터 요청
2. 클라이언트가 요청시 헤더에 JWT 포함
3. 데이터를 확인하고 토큰으로 사용자 검증
4. 요청에 대한 응답과 데이터 반환

### 세션과의 비교

JWT는 서버가 세션을 유지하지 않는 Stateless 방식으로 동작하며 서버가 각 사용자에 대한 세션 상태를 유지할 필요가 없는 것이 핵심이다. 또한 세션 기반 인증보다 더욱 세밀한 권한 부여가 가능하며 사용자 정보를 포함해 토큰을 만들 수 있어 일정 부분에서 성능 최적화의 가능성도 존재한다.

단점으로는 토큰의 크기, 만료된 토큰 처리에 대한 복잡성, 위조 토큰 등의 문제가 존재한다. 가장 위험한 부분은 만료된 토큰을 즉시 무효화 시킬 수 없는 점이며 이는 JWT가 한 번 발급되면 만료 전까지 유효하기 때문에 발생하는 문제다. 이를 해결하기 위해 블랙리스트 관리나 짧은 만료 시간 설정, 리프레시 토큰 전략이 필요하다.

### 회고

딥다이브 시간에 JWT에 관해 들은 기억이 있지만, 내가 직접 찾아서 프로젝트에 적용해보니 현대의 웹에서 세션보다 구현하기는 솔직히 훨씬 편리한 점이 있는 것 같다.

실제 프로젝트 사용시에는 장단점을 잘 파악해서 사용처를 잘 구분하는 등의 판단이 필요해보인다.
